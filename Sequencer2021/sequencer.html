<!-- from what Julie has told and shown us, I think we should only use index.html -Richard -->

<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>OOMPH Sequencer</title>
  <meta name="description" content="The HTML5 Herald">
  <meta name="author" content="SitePoint">

<!-- CSS only -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
<!-- JavaScript Bundle with Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js" integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

</head>

<body>
    <div class="container">
        
    <!-- Content here -->
    <div class="row">
      <div class="col-sm-4">
         <h6 id="CTCY"> One of three columns</h6>
         <p id ="CurCourse"></p><hr/>
         <button class= "btn btn-success" id="btn1">Add to sequence</button><hr/>
          <button class= "btn sample btn-info" id="1">Load Sample Sequence</button><hr/>
          <button class= "btn sample btn-info" id="2">Load HPM Sequence</button><hr/>
          <button class= "btn sample btn-info" id="3">Load Interdisciplinary Sequence</button><hr/>

          <div id="UnitsLeft">Units left: 14</div><hr/>
          <div id="FinalTerm"></div><hr/>
          <p id="Sequence">Sequence:</p>
          

      </div>
      <div class="col-sm-4">
          <h6>Core and Breadth Courses</h6>
        <div id="CandB"></div>
      </div>
      <div class="col-sm-4">
         <h6>Programatic Courses</h6>
        <div id="ProgC"></div>
      </div>
    </div>
  <!-- <div id="CandB"></div> -->
</div>
  <script>
  let ct=0; //current term;
  let cy =0; //cur year
  var terms = ["Fall 1","Fall 2","Spring 1","Spring 2","Summer 1","Summer 2"];
  var years =[2021]
  var seqs=[];

  var finalTerm =0;
  var finalYear=0;
  var d = new Date();
  var n = d.getFullYear();
  var m = d.getMonth();

  var unitsLeft=14;

  let courses =[];
  let sample1=[];
  let hpm=[];
  let intD=[];
  let curCourse=0;
  var CTCY = $("#CTCY");
  var br="<br/>";
  var CandB= $("#CandB");
  var ProgC= $("#ProgC");
  var editingSequence=false;
  var editIndex=0;
  var editTerm=0;
  var editYear=0;
      
$(document).ready(function(){
      for(var i=years[0]+1;i<years[0]+100;i++)
      {
          years.push(i);
      }
      CTCY.text(terms[ct]+" "+years[cy])
      console.log(years);
      $(document).on("click","#btn1",function(){

          AddToSequence(curCourse);
      });
      $(document).on("click",".btn-course",function(){
         curCourse=this.id;
         $("#btn1").show();
          $("#CurCourse").show();
          CTCY.show();
          $("#FinalTerm").show();
          $("h6").show();
          SetCourses(ct);
      });
      $(document).on("click",".btn-sequence",function(){
          $("#btn1").show();
          $("h6").show();
          $("#CurCourse").show();
          CTCY.show();
          $("#FinalTerm").show();

        ChangeSequence(this.id);
          
      });
      $(document).on("click",".sample",function(){
          // console.log(this.id)
          seqs=[];
          $("#FinalTerm").hide();
          if(this.id==1){
              seqs=sample1;
              unitsLeft=0;

              }
          if(this.id==2){
              seqs=hpm;
              unitsLeft=4;
              }
          if(this.id==3){
              seqs=intD;
              unitsLeft=6;
              }
          // console.log(seqs)
          for(var iI=0;iI<seqs.length;iI++)
          {
              var xX=seqs[iI].course.id;
              courses[xX].inSequence=false
              if(xX>0)courses[xX].inSequence=true;
              // else courses[xX].inSequence=false;
          }
          ct=seqs[seqs.length-1].term;
          cy=seqs[seqs.length-1].year;
          ChangeTerm();
          SetCourses(ct);
          $("#btn1").hide();
          $(".sample").hide();
          $("h6").hide();
          //CandB.empty();
          ProgC.empty();
          $("#CurCourse").hide();
          CTCY.hide();
          $("#UnitsLeft").text(`Units left: ${unitsLeft}`)

          RenderSequence();
      });
      
      FinalTerm();
  });
function FinalTerm()
  {
      // console.log(terms[seqs[seqs.length-1].term]+" "+years[seqs[seqs.length-1].year])
  for (let i =0; i<unitsLeft-1;i++)
  {
      finalTerm++;
      if(finalTerm>5)
      {
          finalTerm=0;
      }
  }
      finalYear=years[cy+Math.ceil(unitsLeft/6)];
      if(finalTerm<2)finalYear--;
  $("#FinalTerm").text(`Estimated Final Term: ${terms[finalTerm]}, ${finalYear}`)

}
function CourseListing(arr) {
      courses=arr;
      // console.log(courses)
      SetCourses(ct);
      
      
  }
  function SampleOne(arr)
  {
      sample1=arr;
      // console.log(sample1);
  }
  function HealthPolicyManagement(arr)
  {
      hpm=arr;
      console.log(hpm);
  }
  function Interdisciplinary(arr)
  {
      intD=arr;
      console.log(intD);
  }
function SetCourses(xX){
      CandB.empty();
      ProgC.empty();
      if(unitsLeft>0)
      {
          for(i = 0; i<courses.length; i++) {
          if((courses[i].term===xX ||courses[i].term===-1 ) && courses[i].inSequence===false){ 
              if(courses[i].column===0) 
              {
                  CandB.append(`<div class="cardz" >
                      <div class="cardz-body">
                      <p class="cardz-header">${courses[i].name}: ${courses[i].title}${br}</p>
                      <p class="btn btn-primary btn-course" id = "${courses[i].id}">Select</p>
                      </div>
                      </div>`)
              }
                  // CandB.append(`<p id="${courses[i].id}">${courses[i].name}: ${courses[i].title}${br}</p>`)
              else {
                  ProgC.append
                      (`<div class="cardz">
                          <p class="cardz-header">${courses[i].name}: ${courses[i].title}${br}</p>
                          <div class="cardz-body">
                          <p class="btn btn-primary btn-course" id = "${courses[i].id}">Select</p>
                          </div>
                      </div>`)}
          }
      }
  }
      $("#CurCourse").text(`${courses[curCourse].name}: ${courses[curCourse].title}`)

  }
function AddToSequence(xX)
  {
      $(".sample").hide();
      if(courses[xX].id>0){
          unitsLeft--;
          courses[xX].inSequence=true;
      }
      else {
          courses[xX].inSequence=false;
          if(!editingSequence){
              finalTerm++;
              if(finalTerm>5)finalTerm=0;
              if(finalTerm===2)finalYear++;
      }
          $("#FinalTerm").text(`Estimated Final Term: ${terms[finalTerm]}, ${finalYear}`)

      }
      $("#UnitsLeft").text(`Units left: ${unitsLeft}`)
      if(unitsLeft<=0){
          $("#btn1").hide();
          $("#CurCourse").hide();
          CTCY.hide();
          $("#FinalTerm").hide();
          CandB.empty();
          ProgC.empty();
          $("h6").hide();
      }
      
      if(!editingSequence){
          var seq = new SequenceThis(ct,cy,courses[xX])
          seqs.push(seq);
          // if(courses[xX].id>0)
          // {
          //     finalTerm--;
          //     if(finalTerm<0)finalTerm=5;
          //     if(finalTerm===1)
          //     finalYear--;
          // }
          ChangeTerm();
      }
      else {
          var seq = new SequenceThis(editTerm,editYear,courses[xX])
          seqs[editIndex]=seq;
          editIndex=0;
          editTerm=0;
          editYear=0;
          editingSequence=false;
          curCourse=0;
          CTCY.empty();
          CTCY.text(terms[ct]+" "+years[cy]);
          SetCourses(ct);
          //ct--;
      }
      // seqs.push(courses[xX])
      console.log(seqs);
      
      RenderSequence();
  }
function ChangeTerm(){
  curCourse=0;
      ct++;
      if(ct>5)ct=0;
      if(ct===2)cy++;
      CTCY.empty();
      
      CTCY.text(terms[ct]+" "+years[cy]);
      SetCourses(ct);
 

  }
  function SequenceThis (term, year, course)
{
  // this.term=terms[term];
  // this.year=years[year];
  this.term=term;
  this.year=year;
  this.course=course;
  this.termActual=terms[term];
  this.yearActual=years[year];
}
function RenderSequence()
{
  $("#Sequence").empty()
  var totalZ=seqs.length;
  if(totalZ>14)totalZ=14;
  for(i = 0; i<totalZ; i++) {
    if(seqs[i].course.name != "Choose From") { 
        $("#Sequence").append(`<p><a class="btn-sequence" id = "${i}">[Change] </a>${seqs[i].termActual}, ${seqs[i].yearActual}  - ${seqs[i].course.name}: ${seqs[i].course.title}</p>
      
      `)
      // <p class="btn btn-primary btn-sequence" id = "${i}">Change</p>
  }
  else {
      $("#Sequence").append(`<p>${seqs[i].termActual}, ${seqs[i].yearActual}  - ${seqs[i].course.name}: ${seqs[i].course.title}</p>
      <p class="btn btn-warning btn-sequence" id = "${i}">Choose Course</p>
`)
  }

  // $("#Sequence").append(`<p>${courses[curCourse].name}: ${courses[curCourse].title}</p>`)
  }
}
function ChangeSequence(xX)
{
  // console.log(seqs[xX].course.id);
  var seq = new SequenceThis(seqs[xX].term,seqs[xX].year,courses[0]);
  editingSequence=true;
  editIndex=xX;
  editTerm=seqs[xX].term;
  editYear=seqs[xX].year;
  // console.log(seqs[xX].course.id);
  if(courses[seqs[xX].course.id].id>0){
          unitsLeft++;
          courses[seqs[xX].course.id].inSequence=false;
          finalTerm++;
          if(finalTerm>5)finalTerm=0;
          if(finalTerm===2)finalYear++;
          $("#FinalTerm").text(`Estimated Final Term: ${terms[finalTerm]}, ${finalYear}`)
      }
      //console.log(courses)
      CTCY.text(terms[seqs[xX].term]+" "+years[seqs[xX].year])
      seqs[xX]=seq;
      $("#UnitsLeft").text(`Units left: ${unitsLeft}`)
  SetCourses(seqs[xX].term);
  RenderSequence();

}
  </script>
  
  <script src="./js/courses.js"></script>
  <script src="./js/Interdisciplinary.js"></script>
  <script src="./js/HealthPolicyManagement.js"></script>

  <script src="./js/sample1.js"></script>


  <script src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous"></script>
<!-- <script type="text/javascript" src="./js/login.js"></script> -->
      </div>
      
    
</body>
</html>



<!-- <!DOCTYPE html>
<html>
<body>

<h2>My First JavaScript</h2>

<button type="button"
onclick="document.getElementById('demo').innerHTML = Date()">
Click me to display Date and Time.</button>

<p id="demo"></p>

</body>
</html>  -->
